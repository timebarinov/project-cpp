# Транспортный справочник, часть H. Номера автобусов на карте

### Условие

В этой части на карту автобусных маршрутов необходимо добавить номера (названия) автобусов, подписав их возле конечных остановок.

### Настройки отрисовки

Добавляется две новых настройки:

Ключ | Описание | Формат значения | Гарантии
:-- | :--: | :--: | :--: 
bus_label_font_size | Размер шрифта названий автобусов | Целое число | Больше 0 и не больше 100000
bus_label_offset | Смещение названий автобусов | Точка | Не меньше -100000 и не больше 100000

**Отрисовка названий автобусов**

Названия автобусов должны отрисовываться у конечных остановок. В случае кольцевого маршрута ("is_roundtrip": true) конечной считается первая остановка маршрута, в случае некольцевого — первая и последняя.

Названия автобусов выводятся в порядке возрастания названий, а в рамках одного автобуса — сначала для первой конечной, а затем, если маршрут некольцевой и конечные не совпадают, для второй.

Для каждого названия у конечной необходимо вывести два текстовых объекта: полупрозрачную подложку и саму надпись.

Общие свойства обоих объектов:

* Координаты (x и y) — координаты соответствующей остановки.

* Смещение (dx и dy) равно настройке bus_label_offset.

* Размер шрифта (font-size) равно настройке bus_label_font_size.

* Название шрифта (font-family) — "Verdana".

* Насыщенность шрифта (font-weight) — "bold". (Для остальных SVG-объектов font-weight должен отсутствовать в списке свойств.)

* Содержимое — собственно название автобуса.

Дополнительные свойства подложки:

* Цвет заливки (fill) и цвет линий (stroke) равны настройке underlayer_color.

* Толщина линий (stroke-width) равна настройке underlayer_width.

* Формы конца линии (stroke-linecap) и соединений (stroke-linejoin) равны "round".

Дополнительное свойство самой надписи:

    Цвет заливки (fill) равен цвету соответствующего автобуса из палитры.

Названия автобусов выводятся сразу после линий. Таким образом, порядок отрисовки объектов получается следующим:

1. Линии автобусных маршрутов.

2. Названия автобусов.

3. Круги, обозначающие остановки.

4. Названия остановок.